---
layout: post
title: OSX 无法授权问题的解决
tags:
- osx
- keychain
- authorization
---

已经被 OSX 无法授权的问题困扰了很久，具体表现为需要授权的时候，弹出类似如下的窗口：

![auth](/images/post/osx/auth.png)

此时只能点击「拒绝」，无法点击「始终允许」和「允许」。

在网上断断续续搜索了很长一段时间都没有找到答案，甚至还求助了 Apple 在线客服也没有解决，最近偶然找到了解决办法。

我安装了几个跟鼠标相关的辅助插件：**SmoothMouse** 和 **Jitouch** 。
必须先禁用掉这些插件，然后再**重新请求**一次，然后再点击始终允许或允许都可以用。

个人猜测是此类插件的原理是修改了系统的鼠标事件，模拟了鼠标事件进行操作。
但是 Keychain 是系统的核心功能，osx 内部验证了鼠标事件的触发来源，检测到是模拟的鼠标事件就不允许授权。

由于这里没有任何的错误提示，完全没有反馈，所以让人不知道怎么解决。

奇怪的是使用此类鼠标辅助软件的人非常多，为什么网上少见这个问题的反馈，难道是因为其他原因导致了只有少部分情况下会遇到这种现象吗？

### TL;DR:

1. 暂时禁用鼠标辅助工具：如 **SmoothMouse**，**Jitouch**, **BetterTouchTool** 等
2. 重新进行一次之前的操作，弹出要求授权的对话框
3. 此时已经可以点击「始终允许」和「允许」了
4. 可以重新启用辅助工具了

### 更新

在当前版本 (10.11.4) 上，此问题已经得到了修复，不清楚具体是哪个版本修复的。
